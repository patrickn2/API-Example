# Go API Challenge

A RESTful API Challenge with Golang

## Installation & Run

```bash
# Clone this project
git clone https://github.com/patrickn2/API-Challenge.git
```

### Make sure you have Docker installed

```bash
# Build and Run
cd api-challenge
make dev
# API Endpoint : http://127.0.0.1:8080/api/v1
```

## Structure

```
├── cmd
│   ├── api
│   │   └── main.go         // API main
│   └── migrations
│       └── main.go         // Migrations main
├── config
│   └── config.go           // Configuration
├── handler                 // Route Handlers
│   ├── handler.go          // Main Handler file
│   ├── clerks.go           // Clerks Handler file
│   └── populate.go         // Populate Handler file
├── infra                   // Related Infrastructure packages
│   ├── migrations
│   │   └── migrations.go   // Migrations package
│   ├── db
│   │   └── database.go     // Database Connection Init
│   └── init.sql            // Postgres database initialization sql
├── interfaces              // Interfaces folder
│   └── user_repository.go  // User Repository Interface
├── migrations              // Migrations sql folder. Use 'make migrations-create "migration name"'
├── mocks                   // Mocks folder generated by Mockery
├── repository              // Repository folder
│   └── user.go             // User Repository
├── httpHandler
│   ├── http.go             // Http Server Initialization
│   └── routes.go           // Routes definition
├── schema
│   └── user.go             // User Schema
├── service
│   ├── user.go             // User Service
│   └── user_test.go        // User Service Tests
├── .env                    // Env file loaded by godotenv autoloader
├── mockery.yaml            // Mockery definition file
├── compose.yaml            // Docker compose file definition
├── Dockerfile              // Docker Container file definition
└── Makefile                // Make definition file
```

## API /api/v1

#### /populate

- `POST` : Go to randomuser.me 5 times getting 1000 users on each call and insert total of 5000 users on database
  - Response: empty

#### /clerks

- `GET` : Get users
  Params:
  - limit (int, optional, default: 10) value between 1 and 100
  - starting_after (int, optional) user Id to start the page
  - ending_before (int, optional) user Id to end the page
  - email (string, optional) filter using LIKE%
